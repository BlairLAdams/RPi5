{
  "id": null,
  "uid": "pagila-demo",
  "title": "Pagila Demo Dashboard",
  "tags": [
    "pagila",
    "demo",
    "postgres"
  ],
  "timezone": "browser",
  "schemaVersion": 36,
  "version": 1,
  "refresh": "5s",
  "panels": [
    {
      "type": "stat",
      "title": "Total Rentals",
      "gridPos": {
        "x": 0,
        "y": 0,
        "w": 6,
        "h": 4
      },
      "datasource": "PostgreSQL",
      "targets": [
        {
          "format": "time_series",
          "refId": "A",
          "rawSql": "SELECT COUNT(*) as total FROM rental;",
          "intervalMs": 1000,
          "maxDataPoints": 100
        }
      ],
      "options": {
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "",
          "values": false
        }
      }
    },
    {
      "type": "timeseries",
      "title": "Rentals Over Time",
      "gridPos": {
        "x": 6,
        "y": 0,
        "w": 18,
        "h": 8
      },
      "datasource": "PostgreSQL",
      "targets": [
        {
          "refId": "A",
          "format": "time_series",
          "rawSql": "\n                    SELECT\n                      rental_date as time,\n                      COUNT(*) as rentals\n                    FROM rental\n                    GROUP BY 1\n                    ORDER BY 1;\n                ",
          "intervalMs": 1000,
          "maxDataPoints": 100
        }
      ]
    },
    {
      "type": "barchart",
      "title": "Top 10 Films by Rental Count",
      "gridPos": {
        "x": 0,
        "y": 8,
        "w": 12,
        "h": 10
      },
      "datasource": "PostgreSQL",
      "targets": [
        {
          "refId": "A",
          "format": "table",
          "rawSql": "\n                    SELECT f.title, COUNT(*) as rentals\n                    FROM rental r\n                    JOIN inventory i ON r.inventory_id = i.inventory_id\n                    JOIN film f ON i.film_id = f.film_id\n                    GROUP BY f.title\n                    ORDER BY rentals DESC\n                    LIMIT 10;\n                ",
          "intervalMs": 1000,
          "maxDataPoints": 100
        }
      ]
    },
    {
      "type": "piechart",
      "title": "Rentals by City",
      "gridPos": {
        "x": 12,
        "y": 8,
        "w": 12,
        "h": 10
      },
      "datasource": "PostgreSQL",
      "targets": [
        {
          "refId": "A",
          "format": "table",
          "rawSql": "\n                    SELECT ci.city, COUNT(*) as rentals\n                    FROM rental r\n                    JOIN customer c ON r.customer_id = c.customer_id\n                    JOIN address a ON c.address_id = a.address_id\n                    JOIN city ci ON a.city_id = ci.city_id\n                    GROUP BY ci.city\n                    ORDER BY rentals DESC\n                    LIMIT 10;\n                ",
          "intervalMs": 1000,
          "maxDataPoints": 100
        }
      ]
    },
    {
      "type": "timeseries",
      "title": "New Customers Over Time",
      "gridPos": {
        "x": 0,
        "y": 18,
        "w": 24,
        "h": 8
      },
      "datasource": "PostgreSQL",
      "targets": [
        {
          "refId": "A",
          "format": "time_series",
          "rawSql": "\n                    SELECT\n                      create_date as time,\n                      COUNT(*) as customers\n                    FROM customer\n                    GROUP BY 1\n                    ORDER BY 1;\n                ",
          "intervalMs": 1000,
          "maxDataPoints": 100
        }
      ]
    }
  ]
}